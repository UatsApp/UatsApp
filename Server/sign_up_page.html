<html>

<head>
	<script src="//code.jquery.com/jquery-1.11.3.min.js">
	</script>
	<link rel="stylesheet" href="stylesheets/index.css">
</head>

<body>
<!-- TODO:
	-modify html tags
	-add a sign_up_page.css 
	


-->
<div id="signUP">

	<form> 
	E-mail:<br>
	<input type="email" id="email" placeholder="E-mail" required>
	<br>
	Username:<br>
	<input type="text" id="username" placeholder="Username" required>
	<br>
	Password:<br>
	<input type="password" id= "password" placeholder="Password" required>
	<br>
	Confirm password:<br>
	<input type="password" id="c_password" placeholder="Confirm your password" required>
	<br>
	Nickname:<br>
	<input type="text" id= "nickname" placeholder="Nickname" required>
	<br><br>
	<input type="button" value="Sign up" onClick="signUP()">

	</form>
</div>
<script type="text/javascript">

	function signUP(){
		var dataToSend = new Object();
		dataToSend.username = $('#username').val();
		dataToSend.password = $('#password').val();
		dataToSend.c_password = $('#c_password').val();
		dataToSend.email = $('#email').val();
		dataToSend.nickname = $('#nickname').val();

		if(dataToSend.username && dataToSend.password && dataToSend.c_password && dataToSend.email){
		$.ajax({
   			type: 'POST',
   			url: 'http://uatsapp.tk/registerDEV/signup.php',  
   			contentType: "application/json",
   			dataType: "json",
   			xhrFields: {withCredentials: true},
    		data: JSON.stringify(dataToSend),
   			success: function (result) {
   				debugger;
   				if(result["success"] === 1){
						alert("Your account has been registred.\n Check your inbox and activate your accout.");
						window.location.href = "index.php"
					}else{
						alert(result["error_message"]);
					}

   				},
   			error: function(error){
   				debugger;
   				alert("ce pula mea intra pe error "+ error);
   			}
		});
	}
}
</script>

</body>
</html>
